<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>SHERPA — MVP v5.0.1</title><link rel="stylesheet" href="app.css"/></head><body>
<header><div class="wrap"><nav class="tabs" id="tabs"></nav></div></header>
<main class="wrap">
<!-- DASHBOARD -->
<section class="view" id="view-dashboard">
<div class="grid g4">
<div class="card"><div class="row space"><div class="title">🚨 En alerte &lt; <span id="db-fin-w"></span>j</div><div class="pill" id="db-alerte-title">0</div></div><div id="db-alerte-list" class="db-list"></div></div>
<div class="card"><div class="row space"><div class="title">⏳ Fin de mission &lt; <span id="db-fin-x"></span>j</div><div class="pill" id="db-fin-title">0</div></div><div id="db-fin-list" class="db-list"></div></div>
<div class="card"><div class="row space"><div class="title">🐕‍🦺 Action STB &gt; <span id="db-stb-y"></span>j</div><div class="pill" id="db-stb-title">0</div></div><div id="db-stb-list" class="db-list"></div></div>
<div class="card"><div class="row space"><div class="title">🗣️ Avis &gt; <span id="db-avis-z"></span>j</div><div class="pill" id="db-avis-title">0</div></div><div id="db-avis-list" class="db-list"></div></div>
<div class="card" id="db-actions-current-card" style="grid-column:span 2">
  <div class="row space" style="margin-bottom:6px"><div class="title">⏳ Actions en cours</div><div class="pill" id="db-actions-recent-count">0</div></div>
  <div class="sub" style="margin-bottom:6px">Aujourd'hui et passées sans heures réalisées (<span id="db-actions-recent"></span>j)</div>
  <div id="db-actions-recent-list" class="db-list"></div>
</div>
<div class="card" id="db-actions-upcoming-card" style="grid-column:span 2">
  <div class="row space" style="margin-bottom:6px"><div class="title">📅 Actions à &lt; <span id="db-actions-upcoming"></span>j</div><div class="pill" id="db-actions-upcoming-count">0</div></div>
  <div class="sub" style="margin-bottom:6px">Demain et à moins de <span id="db-actions-upcoming"></span> jours sans heures réalisées</div>
  <div id="db-actions-upcoming-list" class="db-list"></div>
</div>
</div>
</section>
<!-- ACTIVITÉ -->
<section class="view" id="view-activite" style="overflow:hidden">
<div class="pane" id="acts-pane">
<div class="pane-header">
  <div class="row space header-top">
    <div class="row header-left" style="gap:10px;flex-wrap:wrap">
      <div class="row" style="gap:10px;align-items:center">
        <div class="title">🗂️ Activités</div>
        <div class="pill" id="activities-count">0</div>
      </div>
      <div class="row actions-bar" style="gap:8px">
        <button class="btn small primary" id="btn-new-activity">Ajouter</button>
        <button class="btn small" id="btn-new-consultant">Nouveau consultant</button>
        <button class="btn small" id="btn-reset-filters">Réinitialiser</button>
      </div>
    </div>
    <div class="filters" style="flex:1">
      <div class="filters-grid">
        <select class="filter-select" data-filter="consultant" id="filter-consultant" title="Filtrer par consultant" aria-label="Filtrer par consultant">
          <option value="">👤Tous</option>
        </select>
        <select class="filter-select" data-filter="type" id="filter-type" title="Filtrer par type" aria-label="Filtrer par type">
          <option value="">🗂️Tous</option>
          <option value="ACTION_ST_BERNARD">🐕‍🦺 Action STB</option>
          <option value="NOTE">📝 Note</option>
          <option value="VERBATIM">💬 Verbatim</option>
          <option value="AVIS">🗣️ Avis</option>
          <option value="ALERTE">🚨 Alerte</option>
        </select>
        <select class="filter-select" data-filter="thematique" id="filter-thematique" title="Filtrer par thématique" aria-label="Filtrer par thématique">
          <option value="">🧭Tous</option>
        </select>
        <select class="filter-select" data-filter="month" id="filter-month" title="Filtrer par date" aria-label="Filtrer par date"></select>
      </div>
    </div>
  </div>
</div>
<div class="pane-body hover-scroll">
<table class="table" id="activities-table">
<colgroup><col class="col-type"/><col class="col-consultant"/><col class="col-main"/><col class="col-actions"/></colgroup>
<thead><tr><th>Type</th><th>Consultant</th><th>Description + Guidée</th><th>Actions</th></tr></thead>
<tbody></tbody>
</table>
</div>
</section>
<!-- GUIDÉES -->
<section class="view" id="view-guidee">
  <div class="pane" id="guidee-pane">
    <div class="pane-header">
      <div class="row space guidee-header">
        <div class="row" style="gap:8px;align-items:center;flex-wrap:wrap">
          <div class="title">🧭 Guidées</div>
          <button class="btn small primary" id="btn-new-guidee">Ajouter</button>
        </div>
        <div class="row guidee-filters" style="gap:8px;flex-wrap:wrap">
          <select id="filter-guidee-consultant" title="Filtrer par consultant">
            <option value="">👤 Tous</option>
          </select>
          <select id="filter-guidee-theme" title="Filtrer par thématique">
            <option value="">🧭 Toutes les thématiques</option>
          </select>
          <select id="filter-guidee" title="Filtrer par guidée">
            <option value="">🧭 Toutes les guidées</option>
          </select>
        </div>
      </div>
    </div>
    <div class="pane-body hover-scroll">
      <div id="guidee-timeline" class="timeline-vertical"></div>
    </div>
  </div>
</section>
<!-- RÉGLAGES -->
<section class="view" id="view-reglages">
<div class="reglages-grid">
<div class="card">
<div class="title">⚙️ Paramètres</div>
<div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;margin-top:8px">
<label>delai_alerte_jours <input type="number" id="p-delai_alerte" min="1"/></label>
<label>fin_mission_sous_jours <input type="number" id="p-fin_mission_sous" min="1"/></label>
<label>stb_recent_jours <input type="number" id="p-stb_recent" min="1"/></label>
<label>avis_manquant_depuis_jours <input type="number" id="p-avis_manquant" min="1"/></label>
<label>activites_recent_jours <input type="number" id="p-activites_recent" min="1"/></label>
<label>activites_a_venir_jours <input type="number" id="p-activites_avenir" min="1"/></label>
</div>
<div class="row" style="margin-top:8px"><button class="btn primary small" id="btn-save-params">Enregistrer</button></div>
<div class="sub" style="margin-top:6px">Les titres du Dashboard & l’affichage des barres se mettent à jour automatiquement.</div>
</div>
<div class="card">
  <div class="row space">
    <div class="title">📚 Thématiques</div>
    <button class="btn small" id="btn-add-thematique">Ajouter</button>
  </div>
  <div class="sub" style="margin:6px 0">Chaque thématique nécessite un nom, un emoji et une couleur.</div>
  <div id="thematiques-list" class="thematiques-list"></div>
</div>
<div class="card">
<div class="row space">
<div class="title">🔃 Sync GitHub</div>
<div class="row">
<button class="btn small danger" id="btn-reset-storage">🐈‍⬛ Réinitialiser</button>
<button class="btn small" id="btn-copy-json">📋 Copier JSON</button>
</div>
</div>
<div class="sub" style="margin:6px 0">Aperçu de vos données (lecture seule) — vous pouvez copier le JSON.</div>
<pre id="json-preview" class="mono hover-scroll" style="max-height:400px;overflow:auto;border:1px solid var(--border);padding:10px;border-radius:10px"></pre>
<input id="file-import" type="file" accept="application/json,.json" class="hidden"/>
</div>
</div>
</section>
</main>
<!-- MODALES -->
<dialog id="dlg-activity"><form method="dialog" class="modal" id="form-activity">
<div class="row space modal-header">
<h3>✏️ Activité</h3>
<div class="row" style="gap:6px">
<button type="button" class="btn small" id="fa-goto-consultant">👤Voir le consultant</button>
<button type="button" class="btn ghost modal-close" data-close="dlg-activity" aria-label="Fermer">✕</button>
</div>
</div>
<div class="grid2">
<label>Consultant <select name="consultant_id" required id="fa-consultant"></select></label>
<label>Type <select name="type" required id="fa-type">
<option value="ACTION_ST_BERNARD">🐕‍🦺 Action STB</option><option value="NOTE">📝 Note</option>
<option value="VERBATIM">💬 Verbatim</option><option value="AVIS">🗣️ Avis</option><option value="ALERTE">🚨 Alerte</option>
</select></label>
<label>Date <input type="date" name="date_publication" required id="fa-date"/></label>
<label>Guidée <select name="guidee_id" id="fa-guidee"></select></label>
<label id="fa-heures-wrap" class="hidden">Heures réalisées <input type="number" min="0" step="0.25" name="heures" id="fa-heures"/></label>
<label style="grid-column:1/-1">Description <textarea name="description" required id="fa-desc" placeholder="Description…"></textarea></label>
</div>
    <div class="actions"><button type="button" class="btn danger" data-action="delete">Supprimer</button><button value="ok" class="btn primary">Enregistrer</button></div>
</form></dialog>
<dialog id="dlg-guidee"><form method="dialog" class="modal" id="form-guidee">
  <div class="row space modal-header">
    <h3>✏️ Guidée</h3>
    <button type="button" class="btn ghost modal-close" data-close="dlg-guidee" aria-label="Fermer">✕</button>
  </div>
  <div class="grid2">
    <label>Titre* <input name="titre" required id="fg-titre"/></label>
    <label>Consultant* <select name="consultant_id" required id="fg-consultant"></select></label>
    <label>Thématique* <select name="thematique_id" required id="fg-thematique"></select></label>
    <label>Date de début <input type="date" name="date_debut" id="fg-debut"/></label>
    <label>Date de fin <input type="date" name="date_fin" id="fg-fin"/></label>
    <label style="grid-column:1/-1">Description <textarea id="fg-desc" name="description" placeholder="Description…" style="min-height:240px;resize:none;overflow:hidden"></textarea></label>
  </div>
  <div class="actions"><button value="del" class="btn danger">Supprimer</button><button value="ok" class="btn primary">Enregistrer</button></div>
</form></dialog>
<dialog id="dlg-consultant"><form method="dialog" class="modal" id="form-consultant">
<div class="row space modal-header">
<h3>✏️ Consultant</h3>
<div class="row" style="gap:6px">
<button type="button" class="btn small" id="fc-goto-guidees">🧭Voir ses guidées</button>
<button type="button" class="btn ghost modal-close" data-close="dlg-consultant" aria-label="Fermer">✕</button>
</div>
</div>
<div class="grid2">
<label>Nom* <input name="nom" required id="fc-nom"/></label>
<label>Titre mission <input name="titre_mission" id="fc-titre"/></label>
<label>Date fin (dispo) <input type="date" name="date_fin" id="fc-fin"/></label>
<label>URL (fiche) <input name="url" id="fc-url" placeholder="https://…"/></label>
<label style="grid-column:1/-1">Description <textarea name="description" id="fc-desc" placeholder="Notes libres…"></textarea></label>
</div>
<div class="actions"><button value="del" class="btn danger">Supprimer</button><button value="ok" class="btn primary">Enregistrer</button></div>
</form></dialog>
<script src="app.js" defer></script>
</body></html>
